FIND THE ERROR IN THE FOLLOWING NODEJS CODE: 


server.js

import express from 'express';
import dotenv from  'dotenv'

import {router} from './routers/router.js'

dotenv.config({path: './config.env'})

let app = express()
let port = process.env.port
app.use(express.urlencoded({extended: true}))

app.use(express.json())

app.use(express.static('public'))

app.get('/',(req,res) => {
    res.redirect('/api/details')
})
app.use('/api',router)

app.get((req,res) => {
    console.log('someone is trying to access a 404 route')
    res.status(404).json({
        message : 'content not fount'
    })
})

app.listen(port,()=> {
    console.log('server is running on the port', port)
})


config.env
PORT=4007

routers/router.js 

import express, { response } from  'express'

import {getDetails, byFilter, randomBook, allBooks, searchBookById} from '../controllers/control.js'

let router = express.Router()

router.get('/',(request,response) => {
    response.redirect('/details')
})
router.get('/details',getDetails)
router.get('/filter',byFilter)
router.get('/random',randomBook)
router.get('/all',allBooks)
router.get('/id',searchBookById)

export {router}


controllers/control.js

import books from '../databases/books.js'

let getDetails = () => {
    res.status(200).send(`
        राम राम जी,
        तुम्हाला आमचा website वर जवडपास १०० प्रकारचे पुस्तक मिळतील व त्या पुस्तकांशी संबंधित इतर माहिती सुद्धा मिळेल. ते कशी शोधायची ही खाली दिलेल आहे.

        
        routers खालीलप्रमाणे :

        1. search book by filter : get, localhost/api/filter?scope=value : [book_name,author_name,publication,genre,origin_country]
        
        2. random book : get, localhost/api/books/random

        3.  all books : get ,localhost/api/books/all
        
        4. search book by id : get ,localhost/api/books/id/

        

        `)
}

const byFilter = (req,res) => {
    try {
        let { book_name,author_name,publication,genre,origin_country } = req.query

        let booksArray = books;
        let queryType = "";

        if(!book_name||!author_name||!publication||!genre||!origin_country) throw ('provided values are invalid');

        if(book_name) {
            booksArray = booksArray.filter((book) => {
                return book.book_name.toLowerCase() == book_name.toLowerCase().trim()
            })
            queryType += '/book_name'
        }

        if(author_name) {
            booksArray = booksArray.filter((book) => {
                return book.author_name.toLowerCase() == author_name.toLowerCase().trim()
            })
            queryType += '/author_name'
        }

        if(publication) {
            booksArray = booksArray.filter((book) => {
                return book.publication.toLowerCase() == publication.toLowerCase().trim()
            })
            queryType += '/publication'
        }

        if(genre) {
            booksArray = booksArray.filter((book) => {
                return book.genre.toLowerCase() == genre.toLowerCase().trim()
            })
            queryType += '/genre'
        }

        if(origin_country) {
            booksArray = booksArray.filter((book) => {
                return book.origin_country.toLowerCase() == origin_country.toLowerCase().trim()
            })
            queryType += '/origin_country'
        }

        if(booksArray.length == 0) throw ('Unable to featch information regarding', queryType)

        
        res.status(200).json({
            Message : 'Infomation featched according to request which was :', queryType,
            'Number_of_Response(s)': booksArray.length,
            'Results' : booksArray

        })

    } catch(err) {
        console.log(err);
        response.status(400).json({
            Message : 'Unable to get the data', 
            err,
        })

    }
}
const randomBook = (req,res) => {
    let randomNum = Math.floor((Math.random()*50)+1)
    let result = books.filter(
        (book) => {
            return book._id === randomNum
        }
    )
    response.status(200).json({
        Message : 'Random book that you are requesting for is', result
    })
}

const allBooks = (req,res) => {
    response.status(200).json({message: 'All the books within the dataset are : ', books})
}

const searchBookById = (req,res) => {
    try{
        let {id} = req.params
        if (!id) throw ('Id does not exists');
        let result = books.filter((books) => {
            return books.id ==id
        })
        if(result.length == 0) throw ('UNABLE TO FIND THE BOOK')
        response.stauts(200).json
    } catch (err) {
        console.log(err)
        response.status(400).json({
            message : `Unable to get data based on id`
        })
    }
}


export {getDetails, byFilter, randomBook, allBooks, searchBookById}



databases/books.js

const books = [
  {
    "_id": 1,
    "book_name": "Season wall organization",
    "author_name": "Richard Lucas",
    "publication": "Garza, Adams and Barnett",
    "genre": "Sci-Fi",
    "total_pages": 650,
    "date_of_release": "19-05-1990",
    "origin_country": "Brazil"
  },
  {
    "_id": 2,
    "book_name": "Man name resource",
    "author_name": "Alexandra Brown",
    "publication": "West Group",
    "genre": "Non-Fiction",
    "total_pages": 205,
    "date_of_release": "17-08-2006",
    "origin_country": "India"
  },
  {
    "_id": 3,
    "book_name": "Yeah sure again resource",
    "author_name": "Sarah Castro",
    "publication": "Summers, Jones and Rodriguez",
    "genre": "Mystery",
    "total_pages": 846,
    "date_of_release": "05-09-2000",
    "origin_country": "UK"
  },
  {
    "_id": 4,
    "book_name": "Day high produce",
    "author_name": "Matthew Wood",
    "publication": "Hall-Martinez",
    "genre": "Non-Fiction",
    "total_pages": 208,
    "date_of_release": "30-07-1979",
    "origin_country": "Australia"
  },
  {
    "_id": 5,
    "book_name": "Table determine argue",
    "author_name": "Joshua Soto",
    "publication": "Mitchell, Wade and Brown",
    "genre": "Fiction",
    "total_pages": 428,
    "date_of_release": "27-07-1993",
    "origin_country": "USA"
  },
  {
    "_id": 6,
    "book_name": "Seem get",
    "author_name": "Katherine Gallagher",
    "publication": "Wheeler, Richardson and Ballard",
    "genre": "Fantasy",
    "total_pages": 193,
    "date_of_release": "25-07-2004",
    "origin_country": "Italy"
  },
  {
    "_id": 7,
    "book_name": "Not prepare leave",
    "author_name": "Danielle Murphy",
    "publication": "Warren-Horn",
    "genre": "Romance",
    "total_pages": 506,
    "date_of_release": "28-04-2002",
    "origin_country": "Canada"
  },
  {
    "_id": 8,
    "book_name": "Also cold process",
    "author_name": "Tiffany Murphy",
    "publication": "Reynolds-Vasquez",
    "genre": "Mystery",
    "total_pages": 132,
    "date_of_release": "06-07-1982",
    "origin_country": "USA"
  },
  {
    "_id": 9,
    "book_name": "Company from surface",
    "author_name": "Amanda Fisher",
    "publication": "Williams-Hernandez",
    "genre": "Sci-Fi",
    "total_pages": 906,
    "date_of_release": "24-07-2024",
    "origin_country": "USA"
  },
  {
    "_id": 10,
    "book_name": "Current",
    "author_name": "Anthony Gomez MD",
    "publication": "Walton-Everett",
    "genre": "Thriller",
    "total_pages": 786,
    "date_of_release": "05-06-1993",
    "origin_country": "Japan"
  },
  {
    "_id": 11,
    "book_name": "Every hot",
    "author_name": "Janice Smith",
    "publication": "Gentry Inc",
    "genre": "Horror",
    "total_pages": 770,
    "date_of_release": "24-05-1982",
    "origin_country": "France"
  },
  {
    "_id": 12,
    "book_name": "Mind son address",
    "author_name": "Crystal Braun",
    "publication": "Floyd-Mann",
    "genre": "Thriller",
    "total_pages": 647,
    "date_of_release": "30-10-1982",
    "origin_country": "Canada"
  },
  {
    "_id": 13,
    "book_name": "Between bank visit",
    "author_name": "Brian Pierce",
    "publication": "Alvarez-Greer",
    "genre": "History",
    "total_pages": 813,
    "date_of_release": "05-03-1980",
    "origin_country": "Australia"
  },
  {
    "_id": 14,
    "book_name": "A another",
    "author_name": "Dr. Terry Lloyd V",
    "publication": "Reed, Williams and Simmons",
    "genre": "Romance",
    "total_pages": 715,
    "date_of_release": "21-02-2007",
    "origin_country": "Brazil"
  },
  {
    "_id": 15,
    "book_name": "Tree conference leader",
    "author_name": "Alexandra Chang",
    "publication": "Bautista-Weaver",
    "genre": "Non-Fiction",
    "total_pages": 699,
    "date_of_release": "29-02-2000",
    "origin_country": "Italy"
  },
  {
    "_id": 16,
    "book_name": "Option fill",
    "author_name": "Beverly Pitts",
    "publication": "Hall, Brown and Kelley",
    "genre": "Fiction",
    "total_pages": 429,
    "date_of_release": "01-08-2008",
    "origin_country": "Japan"
  },
  {
    "_id": 17,
    "book_name": "Crime",
    "author_name": "Duane Hudson",
    "publication": "Jones, Flores and Holmes",
    "genre": "Non-Fiction",
    "total_pages": 991,
    "date_of_release": "17-11-2021",
    "origin_country": "Italy"
  },
  {
    "_id": 18,
    "book_name": "Company production",
    "author_name": "Stephen Davis",
    "publication": "Miller Ltd",
    "genre": "Horror",
    "total_pages": 998,
    "date_of_release": "06-07-1989",
    "origin_country": "UK"
  },
  {
    "_id": 19,
    "book_name": "Personal peace themselves",
    "author_name": "Adrian Harrington",
    "publication": "Smith and Sons",
    "genre": "Sci-Fi",
    "total_pages": 738,
    "date_of_release": "23-06-1978",
    "origin_country": "Italy"
  },
  {
    "_id": 20,
    "book_name": "Debate chair message",
    "author_name": "David Doyle",
    "publication": "Sutton, Wilson and Yang",
    "genre": "Mystery",
    "total_pages": 733,
    "date_of_release": "12-02-2018",
    "origin_country": "Germany"
  },
  {
    "_id": 21,
    "book_name": "Positive religious",
    "author_name": "Michael Watson",
    "publication": "Morgan Inc",
    "genre": "Thriller",
    "total_pages": 516,
    "date_of_release": "06-12-1999",
    "origin_country": "Japan"
  },
  {
    "_id": 22,
    "book_name": "Church",
    "author_name": "David Williams",
    "publication": "Smith Inc",
    "genre": "Non-Fiction",
    "total_pages": 550,
    "date_of_release": "23-06-2016",
    "origin_country": "Brazil"
  },
  {
    "_id": 23,
    "book_name": "Use rock",
    "author_name": "Dwayne Rivas",
    "publication": "Faulkner, Tran and Harvey",
    "genre": "Mystery",
    "total_pages": 546,
    "date_of_release": "17-12-1996",
    "origin_country": "Canada"
  },
  {
    "_id": 24,
    "book_name": "Beautiful phone resource",
    "author_name": "Nathaniel Stephens",
    "publication": "Brown Group",
    "genre": "Non-Fiction",
    "total_pages": 689,
    "date_of_release": "11-07-2007",
    "origin_country": "USA"
  },
  {
    "_id": 25,
    "book_name": "Lose treatment black",
    "author_name": "Paul Ali",
    "publication": "Kelly and Sons",
    "genre": "Non-Fiction",
    "total_pages": 320,
    "date_of_release": "22-05-2025",
    "origin_country": "Canada"
  },
  {
    "_id": 26,
    "book_name": "Admit peace process",
    "author_name": "Richard Newman",
    "publication": "Bailey Ltd",
    "genre": "History",
    "total_pages": 455,
    "date_of_release": "05-07-1979",
    "origin_country": "Germany"
  },
  
];

export default books;



// completed